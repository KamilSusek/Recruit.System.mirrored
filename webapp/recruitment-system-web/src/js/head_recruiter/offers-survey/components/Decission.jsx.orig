<<<<<<< HEAD
import React, {useState} from 'react';
import CallApi from '../../service/CallApi.js';
import '../../../../css/Applications.css';

const Decission = props => {
  const [isShown, toggleShow] = useState (false);
  const [decission, setDecission] = useState ({
    description: '',
    jobApplicationID: props.id,
    result: '',
    rate: 0,
  });
=======
import React, {useState, useContext} from 'react';
import CallApi from '../../service/CallApi.js';
import '../../../../css/Applications.css';
import {SurveyContext} from '../context/SurveyContext.js';
function isEqual (value, to) {
  return value === to;
}

const Decission = props => {
  const [isShown, toggleShow] = useState (false);
  const [description, setDescription] = useState ('');
  const [jobApplicationID, setJobApplicationID] = useState (props.id);
  const [result, setResult] = useState ('0');
  const [rate, setRate] = useState (0);
  const {getAppsBySearchParams} = useContext (SurveyContext);
>>>>>>> branch_reanimacja
  if (
    !props.showForm.rate // POPRAWIĆ
  )
    return isShown
      ? <div className="dec show">
          <h4>DECYZJA</h4>
          <p>
            Wniosek został rozpatrzony{' '}
            <select
              onChange={event => {
<<<<<<< HEAD
                setDecission ({result: event.target.value});
=======
                setResult (event.target.value);
>>>>>>> branch_reanimacja
              }}
            >
              <option value="2">-</option>
              <option value="1">Pozytywnie</option>
              <option value="0">Negatywnie</option>
            </select>
            {' '}z oceną{' '}
            <input
              placeholder="ocena"
              type="number"
              onChange={event => {
<<<<<<< HEAD
                setDecission ({rate: event.target.value});
=======
                setRate (parseInt (event.target.value));
>>>>>>> branch_reanimacja
              }}
            />
            {'.'}
          </p>
          <textarea
            placeholder="Uzasadnienie"
            onChange={event => {
<<<<<<< HEAD
              setDecission ({description: event.target.value});
=======
              setDescription (event.target.value);
>>>>>>> branch_reanimacja
            }}
          />
          <button
            className="submit"
            onClick={event => {
              event.preventDefault ();
<<<<<<< HEAD
              if (
                decission.description !== '' &&
                decission.result !== '' &&
                decission.rate !== ''
              ) {
                CallApi.sendDecission (decission).then (response =>
                  console.log ('okk')
                );
              }
=======
              const decission = {
                description: description,
                jobApplicationID: jobApplicationID,
                result: result,
                rate: rate,
              };
              if (
                description !== '' &&
                result !== '' &&
                rate !== '' &&
                result !== '0'
              ) {
                CallApi.sendDecission (decission).then (response => {
                  console.log (decission, 'ok');
                });
              } else {
                console.log (decission, 'not ok');
              }
              getAppsBySearchParams ();
>>>>>>> branch_reanimacja
            }}
          >
            PRZEŚLIJ DECYZJĘ
          </button>
          <button
            className="exit"
            onClick={event => {
              event.preventDefault ();
              toggleShow (false);
            }}
          >
            ZAMKNIJ
          </button>
        </div>
      : <div>
          <button
            onClick={event => {
              event.preventDefault ();
              toggleShow (true);
            }}
          >
            DECYZJA
          </button>
        </div>;
  else
    return (
      <div className="dec show">
        Decyzja została rozpatrzona
        {' '}
        {props.showForm.rate ? 'pozytywnie' : 'negatywnie'}
      </div>
    );
};
export default Decission;
/*  sendDecission (decission) {
    let dto = {
      description: decission.description, //decission.description,
      jobApplicationID: decission.jobApplicationId, // decission.jobApplicationID,
      result: decission.result,
      rate: decission.rate,
    };

    return axios ({
      method: 'post',
      url: `http://localhost:8080/head/addDecission`,
      data: dto,
    });
  }*/
